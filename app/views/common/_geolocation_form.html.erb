<% if form.object.respond_to?(:build_geolocation) %>
  <% form.object.build_geolocation unless form.object.geolocation.present? %>
  <%= form.fields_for :geolocation do |m| %>
    <%= m.input :latitude, input_html: form.object.new_record? ? { 'data-x-frontend-value': 'latitude'} : {} %>
    <%= m.input :longitude, input_html: form.object.new_record? ? { 'data-x-frontend-value': 'longitude'} : {} %>
  <% end %>
<% end %>
