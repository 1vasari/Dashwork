<% should_sort = local_variables.include?(:sort_fields) && instance_variable_defined?('@q') %>
<% classes = local_variables.include?(:row_classes) ? row_classes : {} %>

<div class='box'>
  <table class='table is-fullwidth is-hoverable is-clickable'>
    <thead>
      <tr>
        <% fields.each do |field| %>
          <th class='<%= classes[field] %>'>
            <% if should_sort && Array(sort_fields).include?(field) %>
              <%= sort_link @q, field %>
            <% else %>
              <%= field.to_s.humanize %>
            <% end %>
          </th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% items.each do |item| %>
        <tr onclick="javascript:Turbolinks.visit('<%= polymorphic_path([item]) %>');">
          <% fields.each do |field| %>
            <td class='<%= classes[field] %>'>
              <%= item.decorate field %>
            </td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
