<nav class="navbar is-light" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <%= link_to root_path, class: 'navbar-item' do %>
      <h1 class="title is-4"><%= EnvSettings.product_name %></h1>
    <% end %>
    <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="mainNavbar">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>

  <div id="mainNavbar" class="navbar-menu">
    <div class="navbar-start">
      <% if user_signed_in? %>
        <%= link_to 'Home', root_path, class: 'navbar-item' %>
        <%= link_to 'Settings', edit_settings_profile_path(current_user), class: 'navbar-item' %>

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">
            Go to...
          </a>

          <div class="navbar-dropdown">
            <% if current_tenant.apps.present? %>
              <% current_tenant.apps.each do |app| %>
                <%= link_to app[:name], app[:path], class: 'navbar-item' %>
              <% end %>
              <hr class="navbar-divider">
            <% end %>
            <%= link_to 'Manage Apps', settings_tenant_apps_path(current_tenant), class: 'navbar-item' %>
          </div>
        </div>
      <% end %>
    </div>

    <div class="navbar-end">
      <% if user_signed_in? %>
        <div class="navbar-item">
          <%= current_user.email %> (<%= current_tenant.name %>)
        </div>
      <% end %>

      <div class="navbar-item">
        <div class="buttons">
          <% if user_signed_in? %>
            <%= link_to 'Sign out', destroy_user_session_path, class: 'button is-danger is-light', method: :delete %>
          <% else %>
            <%= link_to 'Sign up', new_user_registration_path, class: 'button is-primary' %>
            <%= link_to 'Sign in', new_user_session_path, class: 'button is-light' %>
          <% end %>
        </div>
      </div>
    </div>
</nav>
